<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>A-Frame demo</title>
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <!-- ここでA-Frameフレームワークをページにインクルードする -->
</head>
<body>
	<!-- HTML goes here -->
  <a-scene>
    <a-sky color="#DDDDDD"></a-sky>
    <a-box color="#4CC3D9" position="-1 .5 -3" rotation="0 45 0">
      <a-animation attribute="rotation" from="20 0 0" to="20 360 0" direction="alternate"
                   dur="4000" repeat="indefinite" easing="ease"><a-animation>
    </a-box>
    <!-- Camera要素 -->
    <a-camera wasd-controls-enabled="true" position="0 1.8 0">
      <!-- カーソルをカメラの内側に置くことで子要素の振る舞いになる -->
      <a-cursor color="#2E3A87">
      <a-entity camera look-controls>
    </a-camera>

    <a-light type="directional" color="#FFF" intensity="0.5" position="-1 1 2"></a-light>
    <a-light type="ambient" color="#FFF"></a-light>

    <a-entity geometry="
                  primitive: torus;
                  radius: 1;
                  radiusTubular: 0.1;
                  segmentsTubular: 12;"
              material="
                  color: #EAEFF2;
                  roughness: 0.1;
                  metalness: 0.5;"
              rotation="10 0 0"
              position="-3 1 0">
              <a-animation attribute="scale" to="1 0.5 1" direction="alternate"
                           dur="2000" repeat="indefinite" easing="linear"><a-animation>
    </a-entity>
  </a-scene>
  <script type="text/javascript">
    var scene = document.querySelector('a-scene');
    var cylinder = document.createElement('a-cylinder');
    cylinder.setAttribute('color', '#FF9500');
    cylinder.setAttribute('height', '2');
    cylinder.setAttribute('radius', '0.75');
    cylinder.setAttribute('position', '3 1 0');
    scene.appendChild(cylinder);

    // シリンダの位置を毎フレーム更新する関数
    var t = 0;
    function render() {
      t += 0.01;
      requestAnimationFrame(render);
      cylinder.setAttribute('position', '3 '+(Math.sin(t*2)+1)+' 0');
    }
    render();
  </script>
</body>
</html>
